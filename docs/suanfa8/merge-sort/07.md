# 自底向上的归并排序

**说明：本节内容可以不看，面试基本不考**。

以上我们使用的是「自顶向下」的归并排序，下面我们介绍「自底向上」的归并排序算法。我们并不须要递归，只须要迭代就可以了。

假设待排序的数组为：`[8, 6, 2, 3, 1, 5, 7, 4]`。

首先对这个数组每隔 $2$ 个元素进行一个划分，得到：

![](https://suanfa8-1252206550.cos.ap-shanghai.myqcloud.com/suanfa8//40da04fa-7de2-437a-893f-286ad3efbd39.jpg)

对每一个划分内的元素进行排序，得到：

![](https://suanfa8-1252206550.cos.ap-shanghai.myqcloud.com/suanfa8//90af5f1b-04b3-4edc-afe5-d65c59b9e8f2.jpg)

将上一步的结果，每隔 $4$ 个元素进行一次划分，得到

![](https://suanfa8-1252206550.cos.ap-shanghai.myqcloud.com/suanfa8//14c69345-5b9a-4ff9-9959-93ebc81a2533.jpg)

这两个数组都满足归并排序的条件：前半部分与后半部分已经排好序。

所以可以分别进行归并排序，得到：

![](https://suanfa8-1252206550.cos.ap-shanghai.myqcloud.com/suanfa8//9f380b6e-00fb-4cc4-91a1-92e2d6052be1.jpg)

将上一步的结果，每隔 $8$ 个元素进行一次划分，

![](https://suanfa8-1252206550.cos.ap-shanghai.myqcloud.com/suanfa8//982b9b03-4ad0-4dd6-b803-d48d1ebbdbf5.jpg)

这个数组满足归并排序的条件，所以可以进行归并排序，得到：

![](https://suanfa8-1252206550.cos.ap-shanghai.myqcloud.com/suanfa8//f036e2f5-61ad-40d6-b1ad-e50768a65859.jpg)

```java
for(int size = 1; size < n;size+=size){
    // 1 个元素，2 个元素，4 个元素，8 个元素
}
```

```java
/**
 * 自底向上的归并排序，使用迭代就可以完成
 */
@Test
public void test07() {
    int[] randomArray = ArrayUtil.generateRandomArray(100, 1, 100000);
    int n = randomArray.length;
    for (int size = 1; size <= n; size += size) {
        for (int k = 0; k + size < n; k += size + size) {
            mergeTwoSortedArray(randomArray, k, k + size - 1, Integer.min(k + size + size - 1, n - 1));
        }
    }
    System.out.println(Arrays.toString(randomArray));
    Boolean judgeArraySorted = ArrayUtil.judgeArraySorted(randomArray);
    System.out.println(judgeArraySorted);
}
```

**小结**：自底向上的归并排序的过程。

![](https://suanfa8-1252206550.cos.ap-shanghai.myqcloud.com/suanfa8//455a4135-1cf5-41c1-b2f7-c39fafd54996.jpg)




---

作者：liweiwei1419
链接：https://suanfa8.com/merge-sort/bottom-to-up
来源：算法吧
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。