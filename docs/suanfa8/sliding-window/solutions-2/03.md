# ã€ŒåŠ›æ‰£ã€ç¬¬ 438 é¢˜ï¼šæ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯

- é¢˜ç›®é“¾æ¥ï¼š[438. æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯](https://leetcode-cn.com/problems/find-all-anagrams-in-a-string/)ï¼›
- é¢˜è§£é“¾æ¥ï¼š[æ»‘åŠ¨çª—å£ï¼ˆJavaï¼‰](https://leetcode-cn.com/problems/VabMRr/solution/hua-dong-chuang-kou-java-by-liweiwei1419-r567/)ã€‚

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² **s** å’Œä¸€ä¸ªéç©ºå­—ç¬¦ä¸² **p**ï¼Œæ‰¾åˆ° **s** ä¸­æ‰€æœ‰æ˜¯ **p** çš„å­—æ¯å¼‚ä½è¯çš„å­ä¸²ï¼Œè¿”å›è¿™äº›å­ä¸²çš„èµ·å§‹ç´¢å¼•ã€‚

å­—ç¬¦ä¸²åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ï¼Œå¹¶ä¸”å­—ç¬¦ä¸² **s** å’Œ **p** çš„é•¿åº¦éƒ½ä¸è¶…è¿‡ 20100ã€‚

**è¯´æ˜ï¼š**

- å­—æ¯å¼‚ä½è¯æŒ‡å­—æ¯ç›¸åŒï¼Œä½†æ’åˆ—ä¸åŒçš„å­—ç¬¦ä¸²ã€‚
- ä¸è€ƒè™‘ç­”æ¡ˆè¾“å‡ºçš„é¡ºåºã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥:
s: "cbaebabacd" p: "abc"

è¾“å‡º:
[0, 6]

è§£é‡Š:
èµ·å§‹ç´¢å¼•ç­‰äº 0 çš„å­ä¸²æ˜¯ "cba", å®ƒæ˜¯ "abc" çš„å­—æ¯å¼‚ä½è¯ã€‚
èµ·å§‹ç´¢å¼•ç­‰äº 6 çš„å­ä¸²æ˜¯ "bac", å®ƒæ˜¯ "abc" çš„å­—æ¯å¼‚ä½è¯ã€‚
```

**ç¤ºä¾‹ 2:**

```Java []
è¾“å…¥:
s: "abab" p: "ab"

è¾“å‡º:
[0, 1, 2]

è§£é‡Š:
èµ·å§‹ç´¢å¼•ç­‰äº 0 çš„å­ä¸²æ˜¯ "ab", å®ƒæ˜¯ "ab" çš„å­—æ¯å¼‚ä½è¯ã€‚
èµ·å§‹ç´¢å¼•ç­‰äº 1 çš„å­ä¸²æ˜¯ "ba", å®ƒæ˜¯ "ab" çš„å­—æ¯å¼‚ä½è¯ã€‚
èµ·å§‹ç´¢å¼•ç­‰äº 2 çš„å­ä¸²æ˜¯ "ab", å®ƒæ˜¯ "ab" çš„å­—æ¯å¼‚ä½è¯ã€‚
```

**æç¤º:**

- `1 <= s.length, p.length <= 3 * 104`
- `s` å’Œ `p` ä»…åŒ…å«å°å†™å­—æ¯

**è¯´æ˜**ï¼šè¿™é“é¢˜æ˜¯ã€ŒåŠ›æ‰£ã€ç¬¬ 76 é¢˜ï¼ˆ[æœ€å°è¦†ç›–å­ä¸²](https://leetcode-cn.com/problems/minimum-window-substring/)ï¼‰çš„åŒç±»é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒ [ğŸ–¥ å®˜æ–¹é¢˜è§£](https://leetcode-cn.com/problems/minimum-window-substring/solution/zui-xiao-fu-gai-zi-chuan-by-leetcode-solution/) ä¸­çš„è§†é¢‘é¢˜è§£ã€‚å†™å‡ºæ¥æœ‰ç‚¹éº»çƒ¦è€Œå·²ï¼Œæ²¡æœ‰ç‰¹æ®Šçš„æŠ€å·§ã€‚

**å‚è€ƒä»£ç **ï¼š

```Java []
public class Solution {
    public List<Integer> findAnagrams(String s, String p) {
        int sLen = s.length();
        List<Integer> res = new ArrayList<>();
        if (sLen == 0) {
            return res;
        }
        int pLen = p.length();

        int[] window = new int[128];
        int[] pattern = new int[128];

        // å¦‚æœ s ä¸­æŸä¸ªå­—ç¬¦çš„é¢‘ç‡ä¸ p ä¸­ä¸€æ ·ï¼ŒsCount åŠ  1
        int sCount = 0;
        // pCountï¼šp ä¸­ä¸åŒå­—ç¬¦çš„ä¸ªæ•°
        int pCount = 0;
        for (char pChar : p.toCharArray()) {
            pattern[pChar]++;
        }
        for (int i = 0; i < 128; i++) {
            if (pattern[i] > 0) {
                pCount++;
            }
        }

        int left = 0;
        int right = 0;
        while (right < sLen) {
            if (pattern[s.charAt(right)] > 0) {
                window[s.charAt(right)]++;
                if (pattern[s.charAt(right)] == window[s.charAt(right)]) {
                    sCount++;
                }
            }
            right++;

            while (pCount == sCount) {
                // æ­¤æ—¶æ»‘åŠ¨çª—å£æ˜¯ [left..right)ï¼Œé•¿åº¦æ˜¯ right - left
                if (right - left == pLen){
                    res.add(left);
                }
                if (pattern[s.charAt(left)] > 0) {
                    window[s.charAt(left)]--;
                    if (window[s.charAt(left)] < pattern[s.charAt(left)]) {
                        sCount--;
                    }
                }
                left++;
            }
        }
        return res;
    }
}
```



---

ä½œè€…ï¼šliweiwei1419
é“¾æ¥ï¼šhttps://suanfa8.com/sliding-window/solutions-2/0438-find-all-anagrams-in-a-string
æ¥æºï¼šç®—æ³•å§
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚